<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="OFFICE_NOTICE">
  <resultMap class="cn.com.atblue.oa.bean.OfficeNotice" id="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Dec 23 09:49:51 CST 2009.
    -->
    <result column="NOTICEID" jdbcType="VARCHAR" property="noticeid" />
    <result column="NOTITITLE" jdbcType="VARCHAR" property="notititle" />
    <result column="NOTIUNIT" jdbcType="VARCHAR" property="notiunit" />
    <result column="SUBSCRIBER" jdbcType="VARCHAR" property="subscriber" />
    <result column="STARTIME" jdbcType="TIMESTAMP" property="startime" />
    <result column="ENDTIME" jdbcType="TIMESTAMP" property="endtime" />
    <result column="ENDDATE" jdbcType="DATE" property="enddate" />
    <result column="NOTE" jdbcType="VARCHAR" property="note" />
    <result column="RLSDATE" jdbcType="TIMESTAMP" property="rlsdate" />
    <result column="IP" jdbcType="VARCHAR" property="ip" />
    <result column="MUSTSIGN" jdbcType="VARCHAR" property="mustsign" />
    <result column="ISPUBLIC" jdbcType="VARCHAR" property="ispublic" />
    <result column="STATUS" jdbcType="VARCHAR" property="status" />
    <result column="DXTX" property="dxtx" jdbcType="VARCHAR" />
  </resultMap> 
  <select id="getExpiredNotice" parameterClass="java.util.HashMap" resultClass="cn.com.atblue.oa.bean.OfficeNotice">
	  <include refid="basic.pageStart" />
		  	<![CDATA[
		  		select * from office_notice where noticeid in(
				select office_notice.noticeid from office_notice,office_notice_check
								where office_notice.noticeid = office_notice_check.noticeid and 
								office_notice_check.checkman=#userid# and trunc(office_notice.enddate)<trunc(sysdate)
				union 
				select noticeid from office_notice where ispublic=0 and trunc(office_notice.enddate)<trunc(sysdate)
				)
				order by office_notice.startime
		  	]]>
	  <include refid="basic.pageEnd" />
  </select>
  <select id="getExpiredNoticeCount" parameterClass="java.util.HashMap" resultClass="java.lang.Integer">
  	<![CDATA[
  		select count(*) from office_notice where noticeid in(
		select office_notice.noticeid from office_notice,office_notice_check
						where office_notice.noticeid = office_notice_check.noticeid and 
						office_notice_check.checkman=#userid# and trunc(office_notice.enddate)<trunc(sysdate)
		union 
		select noticeid from office_notice where ispublic=0 and trunc(office_notice.enddate)<trunc(sysdate)
		)
  	]]>
  </select>
  <select id="getNowNotice" parameterClass="java.util.HashMap" resultClass="cn.com.atblue.oa.bean.OfficeNotice">
	  <include refid="basic.pageStart" />
		  	<![CDATA[
		  		select * from office_notice where noticeid in(
				select office_notice.noticeid from office_notice,office_notice_check
								where office_notice.noticeid = office_notice_check.noticeid and 
								office_notice_check.checkman=#userid# and trunc(office_notice.enddate)>=trunc(sysdate)
				union 
				select noticeid from office_notice where ispublic=0 and trunc(office_notice.enddate)>=trunc(sysdate)
				)
				order by office_notice.startime
		  	]]>
	  <include refid="basic.pageEnd" />
  </select>
  <select id="getNowNoticeCount" parameterClass="java.util.HashMap" resultClass="java.lang.Integer">
  	<![CDATA[
  		select count(*) from office_notice where noticeid in(
		select office_notice.noticeid from office_notice,office_notice_check
						where office_notice.noticeid = office_notice_check.noticeid and 
						office_notice_check.checkman=#userid# and trunc(office_notice.enddate)>=trunc(sysdate)
		union 
		select noticeid from office_notice where ispublic=0 and trunc(office_notice.enddate)>=trunc(sysdate)
		)
  	]]>
  </select>
  
  <select id="selectAllByDepartment" parameterClass="java.util.HashMap" resultClass="cn.com.atblue.oa.bean.OfficeNotice">
  	<include refid="basic.pageStart" />
	  	<![CDATA[
	  		select * from OFFICE_NOTICE where NOTIUNIT=#department:VARCHAR#
	  	]]>
      <dynamic prepend=" and ">
          <isNotEmpty prepend=" and " property="notititle">
              <![CDATA[NOTITITLE like '%'||#notititle#||'%']]>
          </isNotEmpty>
      </dynamic>
      order by RLSDATE desc
  	<include refid="basic.pageEnd" />
  </select>
  <select id="selectAllByDepartmentCount" parameterClass="java.util.HashMap" resultClass="java.lang.Integer">
  	<![CDATA[
  		select count(*) from OFFICE_NOTICE where NOTIUNIT=#department:VARCHAR#
  	]]>
      <dynamic prepend=" and ">
          <isNotEmpty prepend=" and " property="notititle">
              <![CDATA[NOTITITLE like '%'||#notititle#||'%']]>
          </isNotEmpty>
      </dynamic>
  </select>
  <resultMap class="cn.com.atblue.oa.bean.OfficeNotice" extends="OFFICE_NOTICE.ibatorgenerated_BaseResultMap" id="ibatorgenerated_ResultMapWithBLOBs">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Dec 23 09:49:51 CST 2009.
    -->
    <result column="CONTENT" jdbcType="CLOB" property="content" />
  </resultMap>
  <select id="ibatorgenerated_selectByPrimaryKey" parameterClass="cn.com.atblue.oa.bean.OfficeNotice" resultMap="ibatorgenerated_ResultMapWithBLOBs">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Dec 23 09:49:51 CST 2009.
    -->
    select NOTICEID, NOTITITLE, NOTIUNIT, SUBSCRIBER, STARTIME, ENDTIME, ENDDATE, NOTE, RLSDATE, IP,
      MUSTSIGN, ISPUBLIC, STATUS, CONTENT,DXTX
    from OFFICE_NOTICE
    where NOTICEID = #noticeid:VARCHAR#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="cn.com.atblue.oa.bean.OfficeNotice">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Dec 23 09:49:51 CST 2009.
    -->
    delete from OFFICE_NOTICE
    where NOTICEID = #noticeid:VARCHAR#
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="cn.com.atblue.oa.bean.OfficeNotice">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Dec 23 09:49:51 CST 2009.
    -->
    insert into OFFICE_NOTICE (NOTICEID, NOTITITLE, NOTIUNIT, SUBSCRIBER, STARTIME, ENDTIME,
      ENDDATE, NOTE, RLSDATE, IP, MUSTSIGN, ISPUBLIC, STATUS, CONTENT,DXTX)
    values (#noticeid:VARCHAR#, #notititle:VARCHAR#, #notiunit:VARCHAR#, #subscriber:VARCHAR#,
      #startime:TIMESTAMP#, #endtime:TIMESTAMP#, #enddate:DATE#, #note:VARCHAR#, #rlsdate:TIMESTAMP#, #ip:VARCHAR#,
      #mustsign:VARCHAR#, #ispublic:VARCHAR#, #status:VARCHAR#, #content:CLOB#, #dxtx:VARCHAR#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="cn.com.atblue.oa.bean.OfficeNotice">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Dec 23 09:49:51 CST 2009.
    -->
    insert into OFFICE_NOTICE
    <dynamic prepend="(">
      <isNotNull prepend="," property="noticeid">
        NOTICEID
      </isNotNull>
      <isNotNull prepend="," property="notititle">
        NOTITITLE
      </isNotNull>
      <isNotNull prepend="," property="notiunit">
        NOTIUNIT
      </isNotNull>
      <isNotNull prepend="," property="subscriber">
        SUBSCRIBER
      </isNotNull>
      <isNotNull prepend="," property="startime">
        STARTIME
      </isNotNull>
      <isNotNull prepend="," property="endtime">
        ENDTIME
      </isNotNull>
      <isNotNull prepend="," property="enddate">
        ENDDATE
      </isNotNull>
      <isNotNull prepend="," property="note">
        NOTE
      </isNotNull>
      <isNotNull prepend="," property="rlsdate">
        RLSDATE
      </isNotNull>
      <isNotNull prepend="," property="ip">
        IP
      </isNotNull>
      <isNotNull prepend="," property="mustsign">
        MUSTSIGN
      </isNotNull>
      <isNotNull prepend="," property="ispublic">
        ISPUBLIC
      </isNotNull>
      <isNotNull prepend="," property="status">
        STATUS
      </isNotNull>
      <isNotNull prepend="," property="content">
        CONTENT
      </isNotNull>
      <isNotNull prepend="," property="dxtx">
        DXTX
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(">
      <isNotNull prepend="," property="noticeid">
        #noticeid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="notititle">
        #notititle:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="notiunit">
        #notiunit:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="subscriber">
        #subscriber:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="startime">
        #startime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="endtime">
        #endtime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="enddate">
        #enddate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="note">
        #note:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="rlsdate">
        #rlsdate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="ip">
        #ip:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="mustsign">
        #mustsign:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="ispublic">
        #ispublic:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="status">
        #status:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="content">
        #content:CLOB#
      </isNotNull>
      <isNotNull prepend="," property="dxtx">
        #dxtx:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="cn.com.atblue.oa.bean.OfficeNotice">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Dec 23 09:49:51 CST 2009.
    -->
    update OFFICE_NOTICE
    <dynamic prepend="set">
      <isNotNull prepend="," property="notititle">
        NOTITITLE = #notititle:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="notiunit">
        NOTIUNIT = #notiunit:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="subscriber">
        SUBSCRIBER = #subscriber:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="startime">
        STARTIME = #startime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="endtime">
        ENDTIME = #endtime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="enddate">
        ENDDATE = #enddate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="note">
        NOTE = #note:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="rlsdate">
        RLSDATE = #rlsdate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="ip">
        IP = #ip:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="mustsign">
        MUSTSIGN = #mustsign:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="ispublic">
        ISPUBLIC = #ispublic:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="status">
        STATUS = #status:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="content">
        CONTENT = #content:CLOB#
      </isNotNull>
      <isNotNull prepend="," property="status">
        DXTX = #dxtx:VARCHAR#
      </isNotNull>
    </dynamic>
    where NOTICEID = #noticeid:VARCHAR#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKeyWithBLOBs" parameterClass="cn.com.atblue.oa.bean.OfficeNotice">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Dec 23 09:49:51 CST 2009.
    -->
    update OFFICE_NOTICE
    set NOTITITLE = #notititle:VARCHAR#,
      NOTIUNIT = #notiunit:VARCHAR#,
      SUBSCRIBER = #subscriber:VARCHAR#,
      STARTIME = #startime:TIMESTAMP#,
      ENDTIME = #endtime:TIMESTAMP#,
      ENDDATE = #enddate:DATE#,
      NOTE = #note:VARCHAR#,
      RLSDATE = #rlsdate:TIMESTAMP#,
      IP = #ip:VARCHAR#,
      MUSTSIGN = #mustsign:VARCHAR#,
      ISPUBLIC = #ispublic:VARCHAR#,
      STATUS = #status:VARCHAR#,
      CONTENT = #content:CLOB#,
      DXTX = #dxtx:VARCHAR#
    where NOTICEID = #noticeid:VARCHAR#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="cn.com.atblue.oa.bean.OfficeNotice">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Dec 23 09:49:51 CST 2009.
    -->
    update OFFICE_NOTICE
    set NOTITITLE = #notititle:VARCHAR#,
      NOTIUNIT = #notiunit:VARCHAR#,
      SUBSCRIBER = #subscriber:VARCHAR#,
      STARTIME = #startime:TIMESTAMP#,
      ENDTIME = #endtime:TIMESTAMP#,
      ENDDATE = #enddate:DATE#,
      NOTE = #note:VARCHAR#,
      RLSDATE = #rlsdate:TIMESTAMP#,
      IP = #ip:VARCHAR#,
      MUSTSIGN = #mustsign:VARCHAR#,
      ISPUBLIC = #ispublic:VARCHAR#,
      STATUS = #status:VARCHAR#,
      DXTX = #dxtx:VARCHAR#
    where NOTICEID = #noticeid:VARCHAR#
  </update>
</sqlMap>